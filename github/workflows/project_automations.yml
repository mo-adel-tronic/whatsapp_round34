name: Project Automation Master ğŸ¤–

on:
  # 1. ÙŠØ±Ø§Ù‚Ø¨ Ø§Ù„Ø¥ÙŠØ´ÙˆØ² Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
  issues:
    types: [opened]
  # 2. ÙŠØ±Ø§Ù‚Ø¨ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¯Ù…Ø¬ (ÙØªØ­ØŒ Ø·Ù„Ø¨ Ù…Ø±Ø§Ø¬Ø¹Ø©ØŒ Ø¥ØºÙ„Ø§Ù‚/Ø¯Ù…Ø¬)
  pull_request:
    types: [opened, review_requested, closed]

jobs:
  # ---------------------------------------------------
  # Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø£ÙŠ Issue Ø¬Ø¯ÙŠØ¯ ÙŠØ°Ù‡Ø¨ Ù„Ù€ Todo
  # ---------------------------------------------------
  issue_to_todo:
    name: New Issue -> Todo
    if: github.event_name == 'issues' && github.event.action == 'opened'
    runs-on: ubuntu-latest
    steps:
      - name: Move Issue to Todo
        uses: leonsteinhaeuser/project-beta-automations@v2.2.1
        with:
          gh_token: ${{ secrets.MY_PROJECT_TOKEN }}
          organization: mo-adel-tronic  # âš ï¸ Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§ Ø¨Ø§Ø³Ù… Ø­Ø³Ø§Ø¨Ùƒ
          project_id: 5     # âš ï¸ Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§ Ø¨Ø±Ù‚Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (Ù…Ø«Ù„Ø§Ù‹ 34)
          resource_node_id: ${{ github.event.issue.node_id }}
          operation: update_status
          status_value: "Todo" # âš ï¸ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ·Ø§Ø¨Ù‚ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø¹Ù†Ø¯Ùƒ

  # ---------------------------------------------------
  # Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø£ÙŠ PR Ø¬Ø¯ÙŠØ¯ Ø£Ùˆ Ø·Ù„Ø¨ Ù…Ø±Ø§Ø¬Ø¹Ø© ÙŠØ°Ù‡Ø¨ Ù„Ù€ In-Review
  # ---------------------------------------------------
  pr_to_review:
    name: PR -> In-Review
    # ÙŠØ¹Ù…Ù„ Ø¥Ø°Ø§ ÙØªØ­ PR Ø¬Ø¯ÙŠØ¯ Ø£Ùˆ ØªÙ… Ø·Ù„Ø¨ Ù…Ø±Ø§Ø¬Ø¹Ø©
    if: github.event_name == 'pull_request' && (github.event.action == 'opened' || github.event.action == 'review_requested')
    runs-on: ubuntu-latest
    steps:
      - name: Move PR to In-Review
        uses: leonsteinhaeuser/project-beta-automations@v2.2.1
        with:
          gh_token: ${{ secrets.MY_PROJECT_TOKEN }}
          organization: mo-adel-tronic  # âš ï¸ Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§
          project_id: 5     # âš ï¸ Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§
          resource_node_id: ${{ github.event.pull_request.node_id }}
          operation: update_status
          status_value: "In-Review" # âš ï¸ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ·Ø§Ø¨Ù‚ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø¹Ù†Ø¯Ùƒ

  # ---------------------------------------------------
  # Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ù…Ø¬ (Merge) ÙŠØ°Ù‡Ø¨ Ù„Ù€ Done
  # ---------------------------------------------------
  pr_to_done:
    name: Merged PR -> Done
    # ÙŠØ¹Ù…Ù„ ÙÙ‚Ø· Ø¥Ø°Ø§ ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù€ PR ÙˆÙƒØ§Ù† Ø§Ù„Ø³Ø¨Ø¨ Ù‡Ùˆ Ø§Ù„Ø¯Ù…Ø¬ (merged=true)
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
      - name: Move PR to Done
        uses: leonsteinhaeuser/project-beta-automations@v2.2.1
        with:
          gh_token: ${{ secrets.MY_PROJECT_TOKEN }}
          organization: mo-adel-tronic  # âš ï¸ Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§
          project_id: 5     # âš ï¸ Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§
          resource_node_id: ${{ github.event.pull_request.node_id }}
          operation: update_status
          status_value: "Done" # âš ï¸ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ·Ø§Ø¨Ù‚ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø¹Ù†Ø¯Ùƒ
